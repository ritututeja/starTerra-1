

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tool Troubleshooting &mdash; Visual Interactive Computing Environment 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/jquery.tablesorter.min.js"></script>
        <script type="text/javascript" src="../_static/cyverse.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/cyverse.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contact" href="contact.html" />
    <link rel="prev" title="VICE Best practices" href="bestpractices.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Visual Interactive Computing Environment
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/about.html"><strong>About</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/prerequisites.html"><strong>Prerequisites</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/apptypes.html"><strong>Applications</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/quick-jupyter.html"><strong>Starting JupyterLab App</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/quick-rstudio.html"><strong>Starting RStudio App</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/quick-rshiny.html"><strong>Starting Shiny App</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/sharing.html"><strong>Sharing VICE apps with collaborators</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/sharing.html#vice-share-7"></a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/workflow.html"><strong>Workflow</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/adding.html"><strong>Guidelines for adding VICE tools in DE</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/building.html"><strong>Building VICE tools and apps</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">VICE Apps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../vice_apps/examples.html">VICE Apps in DE</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Help</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="faq.html"><strong>Frequently Asked Questions</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="bestpractices.html"><strong>VICE Best practices</strong></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><strong>Tool Troubleshooting</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#get-the-port">1. Get the port</a></li>
<li class="toctree-l2"><a class="reference internal" href="#get-the-uid-of-the-tool-s-user">2. Get the UID of the tool’s user</a></li>
<li class="toctree-l2"><a class="reference internal" href="#get-the-working-directory">3. Get the working directory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contact.html"><strong>Contact</strong></a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Visual Interactive Computing Environment</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li><strong>Tool Troubleshooting</strong></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/getting_help/tool_troubleshooting.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tool-troubleshooting">
<h1><strong>Tool Troubleshooting</strong><a class="headerlink" href="#tool-troubleshooting" title="Permalink to this headline">¶</a></h1>
<div class="section" id="get-the-port">
<h2>1. Get the port<a class="headerlink" href="#get-the-port" title="Permalink to this headline">¶</a></h2>
<p>You’ll need to figure out the port that the tool uses to present its web interface. This is mandatory and you can integrate a tool without knowing the port it runs on. If you don’t know, you can find the ports that a container image exposes with this command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker inspect &lt;image-name&gt;:&lt;image-tag&gt; -f <span class="s1">&#39;{{range $port, $val := .ContainerConfig.ExposedPorts}}{{$port}} {{end}}&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>&lt;image-name&gt;:&lt;image-tag&gt;</cite> with the your Docker image</p>
</div>
<p>It’s possible that multiple or no ports are listed. If that’s the case you’ll need to refer to the documentation for the tool to figure out the port it uses. Make a note of the port, you’ll need it later when integrating the tool in DE.
Here are the tools and their ports for common tools such as Jupyter notebook, Rstudio and Shiny. If you are developing any applications based on these tools, you can use these ports while integrating the tool in DE.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 57%" />
<col style="width: 43%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Type</p></td>
<td><p>Port</p></td>
</tr>
<tr class="row-even"><td><p>Jupyter</p></td>
<td><p>8888</p></td>
</tr>
<tr class="row-odd"><td><p>Rstudio</p></td>
<td><p>80</p></td>
</tr>
<tr class="row-even"><td><p>Shiny</p></td>
<td><p>3838</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-the-uid-of-the-tool-s-user">
<h2>2. Get the UID of the tool’s user<a class="headerlink" href="#get-the-uid-of-the-tool-s-user" title="Permalink to this headline">¶</a></h2>
<p>You’ll need to figure out the <code class="docutils literal notranslate"><span class="pre">UID</span></code> of the of the user the app runs as. Many tools will start up as root and then use another user for the actual process, so it might take a little investigation to figure this out. To start this figure out the user that the container is configured to start up using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker inspect &lt;image-name&gt;:&lt;image-tag&gt; -f <span class="s1">&#39;{{.ContainerConfig.User}}&#39;</span>
</pre></div>
</div>
<p>If you’re lucky that will contain the numerical UID of the user. In that case you can make a note of the UID and move on. Otherwise you have more work to do. The User field can also be empty or set to the username. If its empty, then the user is <code class="docutils literal notranslate"><span class="pre">root</span></code>. If it’s a username then you’ll need to get the <code class="docutils literal notranslate"><span class="pre">UID</span></code> from inside the container.</p>
<p>To get the <code class="docutils literal notranslate"><span class="pre">UID</span></code> for a username run this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker run --rm -it --entrypoint <span class="s2">&quot;id&quot;</span> &lt;image-name&gt;:&lt;image-tag&gt; -u &lt;username&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>&lt;image-name&gt;:&lt;image-tag&gt;</cite> with the your Docker image</p>
</div>
<p>If the User field is empty or <code class="docutils literal notranslate"><span class="pre">root</span></code>, you need to be sure that the process inside the container actually runs as <code class="docutils literal notranslate"><span class="pre">root</span></code>. There are a few ways to check this:</p>
<ul class="simple">
<li><p>Fire up the container, exec into it, and do a <code class="docutils literal notranslate"><span class="pre">ps</span> <span class="pre">aux</span></code> to see the user the process is running as.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker run -d --name app &lt;image-name&gt;:&lt;image-tag&gt;

$ docker <span class="nb">exec</span> -it app ps aux
</pre></div>
</div>
<ul class="simple">
<li><p>Print out the contents of <code class="docutils literal notranslate"><span class="pre">/etc/passwd</span></code> and check for hints:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run --rm -it --entrypoint <span class="s2">&quot;cat&quot;</span> &lt;image-name&gt;:&lt;image-tag&gt; /etc/passwd
</pre></div>
</div>
<ul class="simple">
<li><p>Alternatively check the documentation for the tool.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The UID of the tool can be empty but setting the UID will make sure that the user can write to the input files in the container.</p>
</div>
<p>Make a note of the UID, you’ll need it later when putting together the JSON for the tool and app.</p>
</div>
<div class="section" id="get-the-working-directory">
<h2>3. Get the working directory<a class="headerlink" href="#get-the-working-directory" title="Permalink to this headline">¶</a></h2>
<p>You’ll need the working directory for the process in the tool container, which may not correspond to the default working directory for the container.</p>
<p>To get the default working directory for the container run this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker inspect &lt;image-name&gt;:&lt;image-tag&gt; -f <span class="s1">&#39;{{.ContainerConfig.WorkingDir}}&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>If that prints out an empty string, then the default working directory is <code class="docutils literal notranslate"><span class="pre">/.</span></code></p></li>
<li><p>If the container fires up as root but the tool runs as another user, then the working directory may need to be that user’s home directory.</p></li>
<li><p>If the container changes to another directory after it starts up, then the working directory may need to be that directory.</p></li>
<li><p>If all else fails, check the documentation and/or try out the container locally to figure out what it does.</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Keep in mind that the working directory is where the input files will be made available. Similar to UID, working directory is not mandatory but given jupyter lab’s default behavior of showing things in subdirectories of the place it’s started. So if you’re loading notebooks and data from the Datastore, you want the working directory (where those files are loaded into the container) to be in the right spot</p>
</div>
<p>Make a note of the working directory, you’ll need it later when putting together the JSON for the tool and app.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="contact.html" class="btn btn-neutral float-right" title="Contact" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="bestpractices.html" class="btn btn-neutral float-left" title="VICE Best practices" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, CyVerse

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>